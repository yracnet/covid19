{"version":3,"sources":["CovidService.js","CovidFilter.js","CovidGraph.js","Manager.js","serviceWorker.js","index.js"],"names":["String","prototype","format","i","args","arguments","this","replace","Array","last","index","length","config","before","after","timeseries","mapper","csv","split","map","it","array","labels","slice","Date","moment","add","push","forEach","name","result","filter","reduce","a","b","c","parseInt","unshift","includes","values","line","label","checked","timeline","increment","fetchTimeLine","type","success","error","e","console","warn","title","url","fetch","then","response","text","matrix","model","catch","createWeekRegression","init","averange","undefined","point","createRegression","fnRegression","log","x","xx","yy","regression","predict","createLinearRegression","ML","window","xML","SimpleLinearRegression","createExponentialRegression","findIndex","ExponentialRegression","CovidFilter","countries","times","onChangeConfig","onChangeCheck","onClickReset","useState","setFilter","filterCountries","toUpperCase","className","colSpan","defaultValue","onChange","value","from","key","onClick","currentTarget","to","event","colors","attr","fnList","start","end","sw","data","fill","pointRadius","borderDash","borderWidth","borderColor","backgroundColor","CovidGraph","indexOf","datasets","dataRadar","Manager","props","state","bind","reloadGraph","setState","element","forceUpdate","React","Component","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.0be8abd1.chunk.js","sourcesContent":["import moment from \"moment\";\n\nString.prototype.format = function() {\n  var i = 0,\n    args = arguments;\n  return this.replace(/{}/g, function() {\n    return typeof args[i] != \"undefined\" ? args[i++] : \"\";\n  });\n};\nArray.prototype.last = function(index = 1) {\n  return this[this.length - index];\n};\n\nconst config = {\n  before: 5,\n  after: 25,\n  timeseries:\n    \"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_{}_global.csv\"\n};\n\nconst mapper = {\n  csvToMatrix: function(csv) {\n    return csv.split(\"\\n\").map(it => it.split(\",\"));\n  },\n  matrixToModel: function(array) {\n    let labels = array[0]\n      .slice(4)\n      .map(it => new Date(it))\n      .map(it => moment(it))\n      .map(it => it.format(\"YYYY-MM-DD\"));\n    let last = moment(new Date(array[0].last()));\n    for (let i = 0; i < config.after; i++) {\n      last = last.add(1, \"days\");\n      labels.push(last.format(\"YYYY-MM-DD\"));\n    }\n    array = array.slice(1);\n\n    // grupo US y CHINA\n    [\"China\", \"US\"].forEach(name => {\n      let result = array\n        .filter(it => it[1] === name)\n        .reduce((a, b) => {\n          let c = [...b];\n          c[0] = \"SUMATORIA\";\n          if (a.length === 0) {\n            return c;\n          }\n          for (let i = 4; i < b.length; i++) {\n            c[i] = parseInt(c[i]) + parseInt(a[i]);\n          }\n          return c;\n        }, []);\n      array.unshift(result);\n    });\n    //grupo UE\n\n    let result = array\n      .filter(it =>\n        [\n          \"Spain\",\n          \"France\",\n          \"Italy\",\n          \"Germany\",\n          \"Portugal\",\n          \"Austria\",\n          \"Belgium\",\n          \"Netherlands\"\n        ].includes(it[1])\n      )\n      .reduce((a, b) => {\n        let c = [...b];\n        if (a.length === 0) {\n          return c;\n        }\n        c[1] = \"UE - Parcial\";\n        c[0] = \"SUMATORIA\";\n        for (let i = 4; i < b.length; i++) {\n          c[i] = parseInt(c[i]) + parseInt(a[i]);\n        }\n        return c;\n      }, []);\n    array.unshift(result);\n\n    let values = array\n      .map(line => ({\n        label: line[1] + (line[0] ? \" / \" + line[0] : \"\"),\n        checked: false,\n        last: line.last(),\n        timeline: line.slice(4).map(it => parseInt(it))\n      }))\n      .map(it => {\n        let increment = it.timeline;\n        it.increment = increment.map((it, i) =>\n          i !== 0 ? it - increment[i - 1] : 0\n        );\n        return it;\n      });\n\n    return {\n      labels,\n      values\n    };\n  }\n};\n\nlet fetchTimeLine = function(type, success, error) {\n  success = success ? success : () => {};\n  error = error\n    ? error\n    : e => {\n        console.warn(\"Error:\", e);\n      };\n  let result = {\n    title: \"TimeLine for \" + type,\n    url: config.timeseries.format(type)\n  };\n  fetch(result.url)\n    .then(response => response.text())\n    .then(text => mapper.csvToMatrix(text))\n    .then(matrix => mapper.matrixToModel(matrix))\n    .then(model => {\n      return { ...result, ...model };\n    })\n    .then(success)\n    .catch(error);\n};\n\nlet createWeekRegression = function(values) {\n  let result = values.map(it => it);\n  let init = result.length - config.before;\n  let averange = 0;\n  for (let i = init; i < result.length; i++) {\n    let diff = result[i] - result[i - 1];\n    averange = averange + diff;\n  }\n  averange = averange / config.before;\n  for (let i = 0; i < init; i++) {\n    result[i] = undefined;\n  }\n  let point = values.last();\n  let index = result.length - 1;\n  for (let i = 0; i < config.after; i++) {\n    result[index - i] = point - averange * i;\n    result[index + i] = point + averange * i;\n  }\n  return result;\n};\n\nlet createRegression = function(values, init, fnRegression) {\n  let length = values.length;\n  console.log(\"=\", init, length, fnRegression);\n  let x = 0;\n  let xx = [];\n  let yy = [];\n  for (var i = init; i < length; ++i) {\n    xx.push(x++);\n    yy.push(values[i]);\n  }\n  const regression = new fnRegression(xx, yy);\n  let result = values.map(it => it);\n  let index = result.length - 1;\n  for (let i = 0; i < init; i++) {\n    result[i] = undefined;\n  }\n  for (let i = 0; i < config.after; i++) {\n    result[index + i] = regression.predict(x + i);\n    result[index - i] = regression.predict(x - i);\n  }\n  return result;\n};\n\nlet createLinearRegression = function(values) {\n  let ML = window.xML;\n  let init = values.length - config.before;\n  //let init = values.findIndex(it => it > 0);\n  return createRegression(values, init, ML.SimpleLinearRegression);\n};\n\nlet createExponentialRegression = function(values) {\n  let ML = window.xML;\n  let init = values.findIndex(it => it > 0);\n  return createRegression(values, init, ML.ExponentialRegression);\n};\nexport {\n  fetchTimeLine,\n  createWeekRegression,\n  createLinearRegression,\n  createExponentialRegression\n};\n","import React, { useState } from \"react\";\n\nfunction CovidFilter({\n  countries,\n  times,\n  config,\n  onChangeConfig,\n  onChangeCheck,\n  onClickReset\n}) {\n  let [filter, setFilter] = useState(\"\");\n  let onChangeFilter = event => {\n    setFilter(event.currentTarget.value);\n  };\n  let filterCountries = countries || [];\n  if (filter) {\n    filterCountries = filterCountries.filter(it => {\n      let label = it.label || \"\";\n      label = label.toUpperCase();\n      return label.includes(filter.toUpperCase());\n    });\n  }\n\n  return (\n    <div className=\"list-group\">\n      <table className=\"table table-responsive table-sm\">\n        <thead>\n          <tr>\n            <th>Mode</th>\n            <th colSpan=\"2\">\n              <select\n                name=\"type\"\n                className=\"form-control form-control-sm\"\n                defaultValue={config.type}\n                onChange={onChangeConfig}\n              >\n                <option value=\"confirmed\">Confirmed</option>\n                <option value=\"deaths\">Deaths</option>\n              </select>\n            </th>\n          </tr>\n          <tr>\n            <th>From</th>\n            <th colSpan=\"2\">\n              <div className=\"input-group\">\n                <select\n                  name=\"from\"\n                  className=\"form-control form-control-sm\"\n                  value={config.from}\n                  onChange={onChangeConfig}\n                >\n                  {times.map((it, index) => (\n                    <option key={index} value={it}>\n                      {it}\n                    </option>\n                  ))}\n                </select>\n                <div className=\"input-group-append\">\n                  <button\n                    name=\"from\"\n                    className=\"btn btn-sm btn-danger\"\n                    type=\"button\"\n                    onClick={e => {\n                      e.currentTarget.value = times[0];\n                      onChangeConfig(e);\n                    }}\n                  >\n                    Clear\n                  </button>\n                </div>\n              </div>\n            </th>\n          </tr>\n          <tr>\n            <th>To</th>\n            <th colSpan=\"2\">\n              <div className=\"input-group\">\n                <select\n                  name=\"to\"\n                  className=\"form-control form-control-sm\"\n                  value={config.to}\n                  onChange={onChangeConfig}\n                >\n                  {times.map((it, index) => (\n                    <option key={index} value={it}>\n                      {it}\n                    </option>\n                  ))}\n                </select>\n                <div className=\"input-group-append\">\n                  <button\n                    name=\"to\"\n                    className=\"btn btn-sm btn-danger\"\n                    type=\"button\"\n                    onClick={e => {\n                      e.currentTarget.value = times.last();\n                      onChangeConfig(e);\n                    }}\n                  >\n                    Clear\n                  </button>\n                </div>\n              </div>\n            </th>\n          </tr>\n          <tr>\n            <th>View</th>\n            <th colSpan=\"2\">\n              <div className=\"input-group\">\n                <input\n                  name=\"filter\"\n                  className=\"form-control form-control-sm\"\n                  type=\"text\"\n                  defaultValue={filter}\n                  onChange={onChangeFilter}\n                />\n                <div className=\"input-group-append\">\n                  <button\n                    className=\"btn btn-sm btn-danger\"\n                    type=\"button\"\n                    onClick={onClickReset}\n                  >\n                    Clear\n                  </button>\n                </div>\n              </div>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {filterCountries.map((it, index) => (\n            <tr key={index}>\n              <th>\n                <input\n                  name={it.label}\n                  type=\"checkbox\"\n                  checked={it.checked}\n                  onChange={onChangeCheck}\n                />\n              </th>\n              <td>{it.label}</td>\n              <td>\n                <span className=\"badge badge-danger\">{it.last}</span>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default CovidFilter;\n","import React from \"react\";\nimport { Line, Radar } from \"react-chartjs-2\";\nimport {\n  createWeekRegression,\n  createLinearRegression,\n  createExponentialRegression\n} from \"./CovidService\";\n//const data = {\n//  labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],\n//  datasets: [\n//    {\n//      label: \"My First dataset\",\n//      fill: false,\n//      lineTension: 0.1,\n//      backgroundColor: \"rgba(75,192,192,0.4)\",\n//      borderColor: \"rgba(75,192,192,1)\",\n//      borderCapStyle: \"butt\",\n//      borderDash: [],\n//      borderDashOffset: 0.0,\n//      borderJoinStyle: \"miter\",\n//      pointBorderColor: \"rgba(75,192,192,1)\",\n//      pointBackgroundColor: \"#fff\",\n//      pointBorderWidth: 1,\n//      pointHoverRadius: 5,\n//      pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\n//      pointHoverBorderColor: \"rgba(220,220,220,1)\",\n//      pointHoverBorderWidth: 2,\n//      pointRadius: 1,\n//      pointHitRadius: 10,\n//      data: [65, 59, 80, 81, 56, 55, 40]\n//    }\n//  ]\n//};\nconst colors = [\n  \"#FF6384\",\n  \"#36A2EB\",\n  \"#FFCE56\",\n  \"#b29dd9\",\n  \"#85a8ba\",\n  \"#ff0000\",\n  \"#00ff00\",\n  \"#0000ff\",\n  \"#fe6b64\"\n];\n\nlet mapper = {\n  createNewList: function(it, attr, fnList) {\n    console.log(\"***\", it);\n    if (!it[attr] || it[attr].length === 0) {\n      it[attr] = fnList(it.timeline);\n    }\n    return it;\n  },\n  createDataset: function(title, it, i, attr, start, end, type) {\n    let values = it[attr];\n    if (!values) {\n      values = [];\n    }\n    if (values.slice) {\n      values = values.slice(start, end);\n    }\n    let sw = title && title.includes(\"-\");\n    return {\n      label: it.label + title,\n      data: values,\n      fill: false,\n      pointRadius: sw ? 1 : 3,\n      borderDash: sw ? [5, 5] : [],\n      borderWidth: sw ? 2 : 3,\n      borderColor: colors[i % colors.length],\n      backgroundColor: colors[i % colors.length],\n      type: type\n    };\n  },\n  slice: function(it, start) {\n    return {\n      ...it,\n      values: it.values.slice(start)\n    };\n  }\n};\n\nfunction CovidGraph({ values, times, from, to }) {\n  let start = 0;\n  let end = values.length;\n  if (from) {\n    start = times.indexOf(from);\n  }\n  if (to) {\n    end = times.indexOf(to);\n  }\n  let data = {\n    labels: times.slice(start, end),\n    datasets: []\n  };\n  let dataRadar = {\n    labels: times.slice(start, end),\n    datasets: []\n  };\n  values\n    .filter(it => it.checked)\n    .map(it => {\n      it = mapper.createNewList(it, \"timeline1\", createWeekRegression);\n      it = mapper.createNewList(it, \"timeline2\", createLinearRegression);\n      it = mapper.createNewList(it, \"timeline3\", createExponentialRegression);\n      return it;\n    })\n    .forEach((it, i) => {\n      dataRadar.datasets.push(\n        mapper.createDataset(\"\", it, i, \"timeline\", start, end, \"radar\")\n      );\n      dataRadar.datasets.push(\n        mapper.createDataset(\n          \"-Week\",\n          it,\n          10 + i,\n          \"timeline1\",\n          start,\n          end,\n          \"radar\"\n        )\n      );\n      dataRadar.datasets.push(\n        mapper.createDataset(\n          \"-Linear\",\n          it,\n          20 + i,\n          \"timeline2\",\n          start,\n          end,\n          \"radar\"\n        )\n      );\n      dataRadar.datasets.push(\n        mapper.createDataset(\n          \"-Expo\",\n          it,\n          30 + i,\n          \"timeline3\",\n          start,\n          end,\n          \"radar\"\n        )\n      );\n      data.datasets.push(\n        mapper.createDataset(\" Bar\", it, i, \"increment\", start, end, \"bar\")\n      );\n      data.datasets.push(\n        mapper.createDataset(\" Point\", it, i, \"timeline\", start, end, \"bubble\")\n      );\n      data.datasets.push(\n        mapper.createDataset(\n          \"-Week\",\n          it,\n          10 + i,\n          \"timeline1\",\n          start,\n          end,\n          \"line\"\n        )\n      );\n      data.datasets.push(\n        mapper.createDataset(\n          \"-Linear\",\n          it,\n          20 + i,\n          \"timeline2\",\n          start,\n          end,\n          \"line\"\n        )\n      );\n      data.datasets.push(\n        mapper.createDataset(\n          \"-Expo\",\n          it,\n          30 + i,\n          \"timeline3\",\n          start,\n          end,\n          \"line\"\n        )\n      );\n    });\n  return (\n    <div>\n      <Line data={data} />\n      <Radar data={dataRadar} />\n    </div>\n  );\n}\n\nexport default CovidGraph;\n","import React from \"react\";\nimport { fetchTimeLine } from \"./CovidService\";\nimport CovidFilter from \"./CovidFilter\";\nimport CovidGraph from \"./CovidGraph\";\nimport \"./Manager.scss\";\n\nclass Manager extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      config: {\n        type: \"confirmed\",\n        from: \"2020-01-01\",\n        to: \"2020-03-30\"\n      },\n      times: [\"01\", \"02\", \"03\", \"04\", \"05\"],\n      countries: [\n        {\n          label: \"line 1\",\n          checked: true,\n          timeline: [5, 15, 2, 30, 5],\n          increment: [0, 0, 10, 20, 30]\n        },\n        {\n          label: \"line 2\",\n          checked: true,\n          timeline: [50, 5, 20, 30, 50],\n          increment: [0, 0, 10, 20, 30]\n        }\n      ]\n    };\n    this.onChangeCheck = this.onChangeCheck.bind(this);\n    this.onChangeConfig = this.onChangeConfig.bind(this);\n    this.onClickReset = this.onClickReset.bind(this);\n    this.reloadGraph = this.reloadGraph.bind(this);\n  }\n\n  onChangeConfig(event) {\n    let { value, name } = event.currentTarget;\n    let { config } = this.state;\n    config[name] = value;\n    this.setState({ config });\n    console.log(\"config\", config);\n    if (name === \"type\") {\n      this.reloadGraph();\n    }\n  }\n\n  onChangeCheck(event) {\n    let { countries } = this.state;\n    let element = event.currentTarget;\n    countries\n      .filter(it => it.label === element.name)\n      .forEach(it => (it.checked = element.checked));\n    this.setState({ countries });\n  }\n\n  onClickReset() {\n    let { countries } = this.state;\n    countries.forEach(it => {\n      it.checked = false;\n    });\n    this.setState({ countries });\n  }\n  componentDidMount() {\n    let state = this.state;\n    fetchTimeLine(state.config.type, data => {\n      state.times = data.labels;\n      state.countries = data.values;\n      state.config.from = \"2020-03-10\";\n      state.config.to = state.times.last(22);\n      state.countries\n        .filter(it => it.label === \"Bolivia\")\n        .forEach(it => {\n          it.checked = true;\n        });\n      console.log(\"-->\", state);\n      this.setState(state);\n    });\n  }\n  componentDidUpdate() {}\n  reloadGraph() {\n    let state = this.state;\n    fetchTimeLine(state.config.type, data => {\n      state.times = data.labels;\n      state.countries = data.values;\n      this.setState(state);\n      this.forceUpdate();\n    });\n  }\n  render() {\n    let { countries, config, times } = this.state;\n    return (\n      <div className=\"container-fluid\">\n        <h3>COVID-19 TimeLine</h3>\n        <div className=\"row\">\n          <div className=\"col-12 col-sm-12 col-md-12 col-lg-9 col-xl-10\">\n            <CovidGraph\n              values={countries}\n              times={times}\n              from={config.from}\n              to={config.to}\n            />\n          </div>\n          <div className=\"col-12 col-sm-12 col-md-12 col-lg-3 col-xl-2\">\n            <CovidFilter\n              countries={countries}\n              times={times}\n              config={config}\n              onChangeConfig={this.onChangeConfig}\n              onChangeCheck={this.onChangeCheck}\n              onClickReset={this.onClickReset}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Manager;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport Manager from \"./Manager\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Manager />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}