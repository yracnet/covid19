(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(46),c=n.n(o),l=n(47),i=n(48),s=n(5),u=n(51),f=n(53),m=n(19),h=n(29),d=n(18),p=n.n(d);String.prototype.format=function(){var e=0,t=arguments;return this.replace(/{}/g,(function(){return"undefined"!=typeof t[e]?t[e++]:""}))},Array.prototype.last=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[this.length-e]};var v={before:5,after:25,timeseries:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_{}_global.csv"},g=function(e){return e.split("\n").map((function(e){return e.split(",")}))},b=function(e){for(var t=e[0].slice(4).map((function(e){return new Date(e)})).map((function(e){return p()(e)})).map((function(e){return e.format("YYYY-MM-DD")})),n=p()(new Date(e[0].last())),a=0;a<v.after;a++)n=n.add(1,"days"),t.push(n.format("YYYY-MM-DD"));e=e.slice(1),["China","US"].forEach((function(t){var n=e.filter((function(e){return e[1]===t})).reduce((function(e,t){var n=Object(h.a)(t);if(n[0]="SUMATORIA",0===e.length)return n;for(var a=4;a<t.length;a++)n[a]=parseInt(n[a])+parseInt(e[a]);return n}),[]);e.unshift(n)}));var r=e.filter((function(e){return["Spain","France","Italy","Germany","Portugal","Austria","Belgium","Netherlands"].includes(e[1])})).reduce((function(e,t){var n=Object(h.a)(t);if(0===e.length)return n;n[1]="UE - Parcial",n[0]="SUMATORIA";for(var a=4;a<t.length;a++)n[a]=parseInt(n[a])+parseInt(e[a]);return n}),[]);return e.unshift(r),{labels:t,values:e.map((function(e){return{label:e[1]+(e[0]?" / "+e[0]:""),checked:!1,last:e.last(),values:e.slice(4).map((function(e){return parseInt(e)})),proyections:[]}}))}},E=function(e,t,n){t=t||function(){},n=n||function(e){console.warn("Error:",e)};var a={title:"TimeLine for "+e,url:v.timeseries.format(e)};fetch(a.url).then((function(e){return e.text()})).then((function(e){return g(e)})).then((function(e){return b(e)})).then((function(e){return Object(m.a)({},a,{},e)})).then(t).catch(n)},C=function(e){for(var t=e.map((function(e){return e})),n=t.length-v.before,a=0,r=n;r<t.length;r++){a+=t[r]-t[r-1]}a/=v.before;for(var o=0;o<n;o++)t[o]=void 0;for(var c=e.last(),l=t.length-1,i=0;i<v.after;i++)t[l-i]=c-a*i,t[l+i]=c+a*i;return t},k=function(e,t,n){var a=e.length;console.log("=",t,a,n);for(var r=0,o=[],c=[],l=t;l<a;++l)o.push(r++),c.push(e[l]);for(var i=new n(o,c),s=e.map((function(e){return e})),u=s.length-1,f=0;f<t;f++)s[f]=void 0;for(var m=0;m<v.after;m++)s[u+m]=i.predict(r+m),s[u-m]=i.predict(r-m);return s},y=function(e){var t=window.xML,n=e.length-v.before;return k(e,n,t.SimpleLinearRegression)},N=function(e){var t=window.xML,n=e.findIndex((function(e){return e>0}));return k(e,n,t.ExponentialRegression)},S=n(52);var w=function(e){var t=e.countries,n=e.times,o=e.config,c=e.onChangeConfig,l=e.onChangeCheck,i=e.onClickReset,s=Object(a.useState)(""),u=Object(S.a)(s,2),f=u[0],m=u[1],h=t||[];return f&&(h=h.filter((function(e){var t=e.label||"";return(t=t.toUpperCase()).includes(f.toUpperCase())}))),r.a.createElement("div",{className:"list-group"},r.a.createElement("table",{className:"table table-responsive table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Mode"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("select",{name:"type",className:"form-control form-control-sm",defaultValue:o.type,onChange:c},r.a.createElement("option",{value:"confirmed"},"Confirmed"),r.a.createElement("option",{value:"deaths"},"Deaths")))),r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("div",{className:"input-group"},r.a.createElement("select",{name:"from",className:"form-control form-control-sm",value:o.from,onChange:c},n.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{name:"from",className:"btn btn-sm btn-danger",type:"button",onClick:function(e){e.currentTarget.value=n[0],c(e)}},"Clear"))))),r.a.createElement("tr",null,r.a.createElement("th",null,"To"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("div",{className:"input-group"},r.a.createElement("select",{name:"to",className:"form-control form-control-sm",value:o.to,onChange:c},n.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{name:"to",className:"btn btn-sm btn-danger",type:"button",onClick:function(e){e.currentTarget.value=n.last(),c(e)}},"Clear"))))),r.a.createElement("tr",null,r.a.createElement("th",null,"View"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"filter",className:"form-control form-control-sm",type:"text",defaultValue:f,onChange:function(e){m(e.currentTarget.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-sm btn-danger",type:"button",onClick:i},"Clear")))))),r.a.createElement("tbody",null,h.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",null,r.a.createElement("input",{name:e.label,type:"checkbox",checked:e.checked,onChange:l})),r.a.createElement("td",null,e.label),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-danger"},e.last)))})))))},O=n(49),x=["#FF6384","#36A2EB","#FFCE56","#b29dd9","#85a8ba","#ff0000","#00ff00","#0000ff","#fe6b64"],j=function(e,t,n){return e[t]&&0!==e[t].length||(e[t]=n(e.values)),e},D=function(e,t,n,a,r,o){var c=t[a];c||(c=[]),c.slice&&(c=c.slice(r,o));var l=e&&e.includes("-");return{label:t.label+e,data:c,fill:!1,pointRadius:l?1:3,borderDash:l?[5,5]:[],borderWidth:l?2:3,borderColor:x[n%x.length],backgroundColor:x[n%x.length]}};var I=function(e){var t=e.values,n=e.times,a=e.from,o=e.to,c=0,l=t.length;a&&(c=n.indexOf(a)),o&&(l=n.indexOf(o)),console.log("--\x3e",n,c,l);var i={labels:n.slice(c,l),datasets:[]};return t.filter((function(e){return e.checked})).map((function(e){return e=j(e,"linear",C),e=j(e,"linearA",y),e=j(e,"linearB",N)})).forEach((function(e,t){i.datasets.push(D("",e,t,"values",c,l)),i.datasets.push(D("-Week",e,10+t,"linear",c,l)),i.datasets.push(D("-Linear",e,20+t,"linearA",c,l)),i.datasets.push(D("-Exponential",e,30+t,"linearB",c,l))})),r.a.createElement("div",null,r.a.createElement(O.a,{data:i}))},M=(n(153),function(e){Object(f.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={config:{type:"confirmed",from:"2020-01-01",to:"2020-03-30"},times:["01","02","03","04","05"],countries:[{label:"line 1",checked:!0,values:[5,15,2,30,5],proyections:[0,0,10,20,30]},{label:"line 2",checked:!0,values:[50,5,20,30,50],proyections:[0,0,10,20,30]}]},a.onChangeCheck=a.onChangeCheck.bind(Object(s.a)(a)),a.onChangeConfig=a.onChangeConfig.bind(Object(s.a)(a)),a.onClickReset=a.onClickReset.bind(Object(s.a)(a)),a.reloadGraph=a.reloadGraph.bind(Object(s.a)(a)),a}return Object(i.a)(n,[{key:"onChangeConfig",value:function(e){var t=e.currentTarget,n=t.value,a=t.name,r=this.state.config;r[a]=n,this.setState({config:r}),console.log("config",r),"type"===a&&this.reloadGraph()}},{key:"onChangeCheck",value:function(e){var t=this.state.countries,n=e.currentTarget;t.filter((function(e){return e.label===n.name})).forEach((function(e){return e.checked=n.checked})),this.setState({countries:t})}},{key:"onClickReset",value:function(){var e=this.state.countries;e.forEach((function(e){e.checked=!1})),this.setState({countries:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.state;E(t.config.type,(function(n){t.times=n.labels,t.countries=n.values,t.config.from="2020-03-10",t.config.to=t.times.last(22),t.countries.filter((function(e){return"Bolivia"===e.label})).forEach((function(e){e.checked=!0})),console.log("--\x3e",t),e.setState(t)}))}},{key:"componentDidUpdate",value:function(){}},{key:"reloadGraph",value:function(){var e=this,t=this.state;E(t.config.type,(function(n){t.times=n.labels,t.countries=n.values,e.setState(t),e.forceUpdate()}))}},{key:"render",value:function(){var e=this.state,t=e.countries,n=e.config,a=e.times;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h3",null,"COVID-19 TimeLine"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-12 col-lg-9 col-xl-10"},r.a.createElement(I,{values:t,times:a,from:n.from,to:n.to})),r.a.createElement("div",{className:"col-12 col-sm-12 col-md-12 col-lg-3 col-xl-2"},r.a.createElement(w,{countries:t,times:a,config:n,onChangeConfig:this.onChangeConfig,onChangeCheck:this.onChangeCheck,onClickReset:this.onClickReset}))))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports=n(154)}},[[54,1,2]]]);
//# sourceMappingURL=main.c2d43338.chunk.js.map