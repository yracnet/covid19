(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(45),c=n.n(o),l=n(46),i=n(47),s=n(4),u=n(50),m=n(52),f=n(53),h=n(28),d=n(18),p=n.n(d);String.prototype.format=function(){var e=0,t=arguments;return this.replace(/{}/g,(function(){return"undefined"!=typeof t[e]?t[e++]:""}))},Array.prototype.last=function(){return this[this.length-1]};var v={days:8,timeseries:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_{}_global.csv"},b=function(e){return e.split("\n").map((function(e){return e.split(",")}))},g=function(e){for(var t=e[0].slice(4).map((function(e){return new Date(e)})).map((function(e){return p()(e)})).map((function(e){return e.format("YYYY-MM-DD")})),n=p()(new Date(e[0].last())),a=0;a<v.days;a++)n=n.add(1,"days"),t.push(n.format("YYYY-MM-DD"));e=e.slice(1),["China","US"].forEach((function(t){var n=e.filter((function(e){return e[1]===t})).reduce((function(e,t){var n=Object(h.a)(t);if(0===e.length)return n;n[0]="SUMATORIA";for(var a=4;a<t.length;a++)n[a]=parseInt(n[a])+parseInt(e[a]);return n}),[]);e.unshift(n)}));var r=e.filter((function(e){return["Spain","France","Italy","Germany","Portugal","Austria","Belgium","Netherlands"].includes(e[1])})).reduce((function(e,t){var n=Object(h.a)(t);if(0===e.length)return n;n[1]="UE - Parcial",n[0]="SUMATORIA";for(var a=4;a<t.length;a++)n[a]=parseInt(n[a])+parseInt(e[a]);return n}),[]);return e.unshift(r),{labels:t,values:e.map((function(e){return{label:e[1]+(e[0]?" / "+e[0]:""),checked:!1,last:e.last(),values:e.slice(4).map((function(e){return parseInt(e)})),proyections:[]}}))}},y=function(e,t,n){t=t||function(){},n=n||function(){};var a={title:"TimeLine for "+e,url:v.timeseries.format(e)};fetch(a.url).then((function(e){return e.text()})).then((function(e){return b(e)})).then((function(e){return g(e)})).then((function(e){return Object(f.a)({},a,{},e)})).then(t).catch(n)},E=n(51);var C=function(e){var t=e.countries,n=e.times,o=e.type,c=e.from,l=e.onChangeFrom,i=e.onChangeCheck,s=e.onChangeType,u=e.onClickReset,m=Object(a.useState)(""),f=Object(E.a)(m,2),h=f[0],d=f[1],p=t||[];return h&&(p=p.filter((function(e){var t=e.label||"";return(t=t.toUpperCase()).includes(h.toUpperCase())}))),r.a.createElement("div",{className:"list-group"},r.a.createElement("table",{className:"table table-responsive table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Mode"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("select",{name:"type",className:"form-control form-control-sm",defaultValue:o,onChange:s},r.a.createElement("option",{value:"confirmed"},"Confirmed"),r.a.createElement("option",{value:"deaths"},"Deaths")))),r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("div",{className:"input-group"},r.a.createElement("select",{name:"type",className:"form-control form-control-sm",value:c,onChange:l},n.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-sm btn-danger",type:"button",onClick:function(e){e.currentTarget.value=n[0],l(e)}},"Clear"))))),r.a.createElement("tr",null,r.a.createElement("th",null,"View"),r.a.createElement("th",{colSpan:"2"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"filter",className:"form-control form-control-sm",type:"text",defaultValue:h,onChange:function(e){d(e.currentTarget.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-sm btn-danger",type:"button",onClick:u},"Clear")))))),r.a.createElement("tbody",null,p.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",null,r.a.createElement("input",{name:e.label,type:"checkbox",checked:e.checked,onChange:i})),r.a.createElement("td",null,e.label),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-danger"},e.last)))})))))},k=n(48),O=["#FF6384","#36A2EB","#FFCE56","#fdfd98","#85a8ba","#eee0c9","#f1f0e8","#b29dd9","#fe6b64"],S=["#77dd77","#779ecb","#90c978","#83c6dd","#5db1d1","#98e690","#ebceed","#afd5aa","#d9ffff"];var N=function(e){var t=e.values,n=e.times,a=e.from,o=0;a&&(o=n.indexOf(a));var c={labels:n.slice(o)};return c.datasets=t.filter((function(e){return e.checked})).map((function(e,t){return{label:e.label,data:e.values.slice(o),fill:!1,borderColor:O[t%O.length],backgroundColor:O[t%O.length]}})),t.filter((function(e){return e.checked})).filter((function(e){return e.proyections})).map((function(e,t){return 0===e.proyections.length&&(e.proyections=function(e){for(var t=e.map((function(e){return e})),n=0,a=t.length-v.days;a<t.length;a++){n+=t[a]-t[a-1]}n/=v.days;for(var r=t.length+v.days,o=t.length;o<r;o++)t[o]=t[o-1]+n;return t}(e.values)),e})).map((function(e,t){return{label:e.label+" Lineal Proyection",data:e.proyections.slice(o),fill:!1,borderDash:[10,5],borderColor:S[t%S.length],backgroundColor:S[t%S.length]}})).forEach((function(e){c.datasets.push(e)})),r.a.createElement("div",null,r.a.createElement(k.a,{data:c}))},T=(n(153),function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={type:"confirmed",from:"2020-01-01",times:["01","02","03","04","05"],countries:[{label:"line 1",checked:!0,values:[5,15,2,30,5],proyections:[0,0,10,20,30]},{label:"line 2",checked:!0,values:[50,5,20,30,50],proyections:[0,0,10,20,30]}]},a.onChangeCheck=a.onChangeCheck.bind(Object(s.a)(a)),a.onChangeFrom=a.onChangeFrom.bind(Object(s.a)(a)),a.onChangeType=a.onChangeType.bind(Object(s.a)(a)),a.onClickReset=a.onClickReset.bind(Object(s.a)(a)),a.reloadGraph=a.reloadGraph.bind(Object(s.a)(a)),a}return Object(i.a)(n,[{key:"onChangeCheck",value:function(e){var t=this.state.countries,n=e.currentTarget;t.filter((function(e){return e.label===n.name})).forEach((function(e){return e.checked=n.checked})),this.setState({countries:t})}},{key:"onChangeType",value:function(e){var t=e.currentTarget.value;this.setState({type:t}),this.reloadGraph()}},{key:"onChangeFrom",value:function(e){var t=e.currentTarget.value;this.setState({from:t})}},{key:"onClickReset",value:function(){var e=this.state.countries;e.forEach((function(e){e.checked=!1})),this.setState({countries:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.state;y(t.type,(function(n){t.times=n.labels,t.countries=n.values,t.from="2020-03-10",t.countries.filter((function(e){return"Bolivia"===e.label})).forEach((function(e){e.checked=!0})),console.log("--\x3e",t),e.setState(t)}))}},{key:"componentDidUpdate",value:function(){}},{key:"reloadGraph",value:function(){var e=this,t=this.state;y(t.type,(function(n){t.times=n.labels,t.countries=n.values,e.setState(t),e.forceUpdate()}))}},{key:"render",value:function(){var e=this.state,t=e.countries,n=e.type,a=e.times,o=e.from;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h3",null,"COVID-19 TimeLine"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-12 col-lg-9 col-xl-10"},r.a.createElement(N,{values:t,times:a,from:o})),r.a.createElement("div",{className:"col-12 col-sm-12 col-md-12 col-lg-3 col-xl-2"},r.a.createElement(C,{countries:t,times:a,type:n,from:o,onChangeCheck:this.onChangeCheck,onChangeType:this.onChangeType,onChangeFrom:this.onChangeFrom,onClickReset:this.onClickReset}))))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports=n(154)}},[[54,1,2]]]);
//# sourceMappingURL=main.f43bdc62.chunk.js.map